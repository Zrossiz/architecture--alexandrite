## Текущие проблемы
- Проблема 1
Заказы периодически не доходят до системы

- Проблема 2
Запросы через open API компании периодически не доходят

- Проблема 3
Медленная работа дашборда MES из-за увеличения нагрузки

- Проблема 4
Низкая наблюдаемость системы

- Проблема 5
Отсутствие мониторинга статуса заказов для клиентов и API пользователей

## Приоритеты решения проблем
### Высокий приоритет
- Добавление DLQ и retry механизмов
- Добавление логгирования
- Добавление мониторинга
- Добавление трассировки
- Масштабирование MES
- Добавить кеширование для дашбордов
### Средний приоритет
- Добавить rate limits
- Выделить отдельные очереди для B2B и B2C
### Низкий приоритет
- Добавить нагрузочное тестирование

## Описание решения проблем
Цель №1 — понять, где теряются заказы.
Начинаем с проверки очередей RabbitMQ.
Проверяем, настроены ли DLQ (Dead Letter Queues) на критических очередях RabbitMQ (особенно CRM → MES).
След шагом добавляем логгирование + мониторинг. В первую очередь логгирование, это проще и быстрее. Если это не дает нам определить проблемное место, то добавляем трассировку. Это точно должно помочь определить проблемную точку. После этого обязательно нужен мониторинг для MES - это крайне важный компонент для работы компании. Если проблема в нагрузке, то предлагаю поставить вторую инстанс приложения (судя по описанию он stateless). Из-за этого возрастет нагрузка на бд, но некоторое время жить можно будет. После этого можно будет либо сделать master-slave реплики для чтения. Если у нас больше write нагрузка, то можно писать в бд асинхронно результаты рассчета

После того, как мы поняли что происходит с MES и устранили проблему - приступаем к дашбордам
Ключевая проблема - это медленная работа. Из самых быстрых способов внедрения - это cache aside. Это позволит кешировать заказы по статусам менеджеров для работы (вполне хватит TTL 60 секунд). Для решения проблемы с новыми заказами - тоже берем кеш, но с инвалидацией. Инвалидация должна быть настроена на два триггера - обновление статуса, добавление нового заказа

### Через 6 месяцев
- Все заказы обрабатываются через очереди с ретраями и логами
- MES масштабируется горизонтально
- Любые пользователи могут получить статус заявки
- Устранена проблема медленной работы дашборда
- Система обладает высокой наблюдаемостью

### Если можно выбрать только 3 пункта
Все эти задачи нацелены на непрерывную и безошибочную работу с заказами
- Все заказы обрабатываются через очереди с ретраями и логами
- Система обладает высокой наблюдаемостью
- MES масштабируется горизонтально
