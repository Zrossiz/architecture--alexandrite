## Необходимые логи для сбора
Будет четыре уровня сбора логов
1. debug
2. info
3. warn
4. error
debug - должны логгироваться все запросы, которые идут к системам (как правило, используют для разработки)
info
- создание заказа через internet shop
- создание заказа через api
- старт обработки стоимости заказа
- конец обработки стоимсоти заказа
- изменение статуса заказа
warn - поведение, близкое к нестандартному. Несанкционированный доступ к статусам заказа
error - логи, которые отвечают за ошибки приложения. По-хорошему - надо логировать все ошибки приложения

## Мотивация
Логирование позволит быстро отследить и определить движение заказа.
Бизнес метрики:
- Среднее время обнаружения инцидентов
- Среднее время восстановления
- Количество повторяющихся проблем
- Уменьшение времени простоя

## Предлагаемое решение
LogStash
Elasticsearch
Kibana
Prometheus + alertmanager
Opentelemetry

Будут добавлены в проекты библиотеки для логирования. К примеру для nodejs можно использовать winston
Логирование нужно во всех ключевых компонентах: CRM, MES, API интерфейс для заказов, интернет магазин
Rabbitmq должен логировать сообщения и ошибки доставки
Логирование персональных данных запрещено. Они должны хешироваться
Использование RBAC для доступа к логам

Политика хранения логов
Выделенные индексы в Elasticsearch:
logs-debug, logs-info, logs-warn, logs-error
logs-order-flow, logs-api, logs-crm, logs-mes

Срок хранения:
debug — 3 дня
info — 30 дней
warn — 90 дней
error — 180 дней

Ожидаемый объём хранения:
При средней нагрузке: ~10 ГБ/мес

Алертинг
Появление error
Резкое увеличение заказов
Появление ошибок в логах брокера сообщений
